このディレクトリにはローカルで動作する簡易チャットのサーバ/クライアント実装が含まれます。
以下のファイルを参照してください:

- `LocalChatMachine_server.py` — UNIX ドメインソケットを利用するサーバ実装。
- `LocalChatMachine_client.py` — UNIX ドメインソケットを利用するクライアント実装。

## 概要（動作の流れ）

1. サーバ (`LocalChatMachine_server.py`) を起動すると、ホームディレクトリにソケットファイル `local_chat_file` を作成して待ち受けます。
2. クライアント (`LocalChatMachine_client.py`) は同じソケットファイルへ接続し、コマンドライン引数で与えたメッセージを送信します。
3. サーバは受信したメッセージを表示し、Faker を使って生成した日本語のダミーテキストをクライアントへ返送します。

## 前提 / 依存関係

- Python 3.x
- パッケージ: `faker`

インストール例 (PowerShell):

```powershell
# LocalChatMessage — Linux 向け使用方法と注意事項

このディレクトリには、UNIX ドメインソケットを使った簡易チャット（サーバ/クライアント）の実装が含まれます。

対象ファイル:

- `LocalChatMachine_server.py` — サーバ実装（UNIX ドメインソケット）
- `LocalChatMachine_client.py` — クライアント実装（UNIX ドメインソケット）

## 前提

- Linux（または UNIX 相当の環境。WSL や macOS も可）
- Python 3.x
- 依存パッケージ: `faker`

インストール例（bash）:

```bash
python3 -m pip install --user faker
```

## 概要（動作）

1. サーバを起動すると、ホームディレクトリにソケットファイル `local_chat_file` を作成して待ち受けます。
2. クライアントは同じソケットファイルへ接続し、コマンドライン引数で渡したメッセージを送信します。
3. サーバは受信したメッセージをログ出力し、Faker で生成した日本語ダミーテキストをクライアントに返します。

## 実行手順（Linux）

1. 別ターミナルでサーバを起動:

```bash
python3 LocalChatMachine_server.py
```

2. 別ターミナルでクライアントを実行（メッセージを1つ引数に渡す）:

```bash
python3 LocalChatMachine_client.py "こんにちは"
```

期待される出力:
- サーバ側: 起動メッセージ（`starting up on <パス>`）および受信ログ
- クライアント側: サーバから返されたテキストが表示される

## 実装上の注意点（Linux向け）

- ソケットファイルの場所: `os.path.expanduser('~/local_chat_file')` に作成されます。ファイル名や場所を変更する場合はスクリプト内の該当行を編集してください。
- 起動時に同名ファイルが存在するとサーバは `os.unlink` で削除します。削除できない場合は権限不足や他プロセスがロックしている可能性があります。
- `recv` はストリームの一部を返すことがあるため、大きなメッセージや連続メッセージを確実に扱うには追加のプロトコル（長さプレフィックス等）を実装してください。
- ログやデバッグ出力は最低限の実装です。運用時はロギングフレームワークやタイムアウト、例外処理の強化を推奨します。

## トラブルシューティング（代表例）

- 接続できない: サーバが起動しているか、ソケットファイルが `~/local_chat_file` に存在するか確認してください。
- パーミッションエラー: ソケットファイルの作成/削除に失敗する場合、ファイル所有者やディレクトリのパーミッション (`ls -l ~/local_chat_file`) を確認してください。
- 同時接続や切断: 現行実装は単一接続を想定しています。複数クライアントを捌きたい場合は accept ループ内でスレッド/プロセス化してください。

## 非Linux環境について（簡潔）

- Windows で動かす場合は WSL を使うか、TCP (AF_INET) を使うようにスクリプトを書き換えてください。TCP への変更は比較的簡単で、ソケット種別を `AF_INET` にし、`bind(('127.0.0.1', 50000))` のようにホストとポートを指定します。
